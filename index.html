<!DOCTYPE html>
<html>
<head>
    <title>1 jour 1 commit</title>
    <meta charset="utf-8">
    <style type="text/css">
        html, body{
            margin: 0;
            padding: 0;
        }

        body{
            font-family: sans-serif;
            text-align: center;
        }

        .profile{
            display: inline-block;
            border: solid black 1px;
            max-width: 960px;
            margin: auto;
            padding: 5px;
            text-align: left;
        }

        .gravatar{
            width: 80px;
            float: left;
            margin-right: 5px;
        }

        .profile_text{
            padding-left: 85px;
        }

        h2.login, h3.last_commit{
            margin: 0;
            padding: 0;
        }
    </style>
</head>
<body>
    <h1>1 Jour 1 Commit</h1>



    <script id="profile_tmpl" type="text/html">
        <div class="profile">
            <img src="<%=this.actor.avatar_url%>" class="gravatar" style="" alt="Avatar de Naouak"/>
            <div class="profile_text">
                <h2 class="login"><%=this.actor.login%></h2>
                <h3 class="last_commit">Dernier Commit</h3>
                <pre class="commit"><%=this.payload.commits[0].message%></pre>
                <div class="commit_date"></div>
                <a href="<%=this.payload.commits[0].url%>" class="commit_link">Voir le commit</a>
            </div>
        </div>
    </script>


    <script type="text/javascript" src="http://yui.yahooapis.com/3.16.0/build/yui/yui-min.js"></script>
    <script type="text/javascript">
        YUI().use("jsonp","template","node", function(Y){
            var handlePush = function(p){
                var tmpl = Y.one("#profile_tmpl").getHTML();
                tmpl = (new Y.Template()).compile(tmpl);
                var n = Y.Node.create(tmpl(p));
                Y.one("body").append(n);
            };


            var url = "https://api.github.com/users/Naouak/events?per_page=100&callback={callback}";
            function handleJSONP(response){
                Y.log(response);

                var events = response.data;
                var pushEvents = events.filter(function(n){ return n.type == "PushEvent"});
                Y.log(pushEvents);

                handlePush(pushEvents[0]);
            }
            Y.jsonp(url,handleJSONP);
        });
    </script>
</body>
</html>